# 전략 비교 분석

## 우리 전략 vs 실제 트랜잭션 비교

| 항목 | 우리 전략 | 첫 번째 트랜잭션 | 두 번째 트랜잭션 |
|------|----------|----------------|----------------|
| **플래시론 프로토콜** | Aave V3 | **Balancer** | **Balancer** |
| **플래시론 수수료** | 0.09% (9 bps) | **0%** | **0%** |
| **플래시론 금액** | 1 ETH (고정) | **9 ETH** | **9 ETH** |
| **DEX 프로토콜** | 1inch, Paraswap, Uniswap V3 | Uniswap V2, **1inch** | **1inch Router**, **1inch Aggregator**, **Balancer Pool** |
| **아비트라지 경로** | WETH → Token → WETH (2-leg) | WETH → Token → WETH (2-leg) | **WETH → Token A → Token B → WETH (3-leg+)** |
| **최소 수익** | $5 USD | - | - |
| **최대 슬리피지** | 0.5% | - | - |
| **최대 가스 가격** | 50 Gwei | - | - |
| **최적 금액 계산** | ✅ 동적 계산 | ❌ 고정 9 ETH | ❌ 고정 9 ETH |
| **DEX Aggregator 우선순위** | ✅ 1inch, Paraswap | ✅ 1inch 사용 | ✅ **1inch Aggregator 적극 활용** |
| **다중 경로 지원** | ❌ 2-leg만 | ❌ 2-leg만 | ✅ **3-leg+ 복잡한 경로** |

---

## 주요 차이점 분석

### 1. 플래시론 프로토콜 선택

| 프로토콜 | 수수료 | 우리 전략 | 실제 사용량 |
|---------|--------|----------|-----------|
| **Balancer** | 0% | ❌ 미지원 | ✅ **압도적 1위** (10,464회) |
| Aave V3 | 0.09% | ✅ 사용 중 | 2위 (1,658회) |
| Uniswap V3 | 0.05% | ❌ 미지원 | 3위 (5회) |

**결론**: Balancer가 수수료 0%로 가장 많이 사용됨. 우리 전략에 추가 필요.

---

### 2. DEX 선택 전략

| DEX | 우리 전략 | 첫 번째 트랜잭션 | 두 번째 트랜잭션 |
|-----|----------|----------------|----------------|
| **1inch Aggregator** | ✅ 지원 | ✅ 사용 | ✅ **적극 활용** |
| Paraswap | ✅ 지원 | ❌ 미사용 | ❌ 미사용 |
| Uniswap V3 | ✅ 지원 | ❌ 미사용 | ❌ 미사용 |
| Uniswap V2 | ❌ 미지원 | ✅ 사용 | ❌ 미사용 |
| Balancer Pool | ❌ 미지원 | ❌ 미사용 | ✅ **사용** |

**결론**: 1inch Aggregator가 실제로 가장 많이 사용됨. 우리 전략과 일치.

---

### 3. 아비트라지 경로 복잡도

| 경로 타입 | 우리 전략 | 첫 번째 트랜잭션 | 두 번째 트랜잭션 |
|----------|----------|----------------|----------------|
| **2-leg** | ✅ 지원 | ✅ 사용 | ❌ 미사용 |
| **3-leg+** | ❌ 미지원 | ❌ 미사용 | ✅ **사용** |

**결론**: 복잡한 다중 경로 아비트라지도 실제로 사용됨. 향후 지원 고려 필요.

---

### 4. 거래 금액 전략

| 전략 | 우리 전략 | 실제 트랜잭션 |
|------|----------|-------------|
| **고정 금액** | ❌ (동적 계산) | ✅ 9 ETH 고정 |
| **최적 금액 계산** | ✅ 동적 계산 | ❌ 고정 사용 |

**결론**: 우리 전략이 더 유연함. 실제 트랜잭션은 고정 금액 사용.

---

## 개선 제안

### 우선순위 1: Balancer 플래시론 추가
- **이유**: 수수료 0%로 비용 절감, 실제 사용량 1위
- **작업**: Balancer Vault 인터페이스 구현, 콜백 로직 추가

### 우선순위 2: Uniswap V2 지원 추가
- **이유**: 첫 번째 트랜잭션에서 사용됨, 유동성 높음
- **작업**: Uniswap V2 라우터 통합

### 우선순위 3: 다중 경로 아비트라지 (3-leg+)
- **이유**: 두 번째 트랜잭션에서 사용됨, 더 많은 기회 발견 가능
- **작업**: 경로 탐색 알고리즘 개선

---

## 우리 전략의 장점

1. ✅ **동적 최적 금액 계산** - 실제 트랜잭션보다 유연함
2. ✅ **DEX Aggregator 우선 사용** - 실제 패턴과 일치
3. ✅ **엄격한 리스크 관리** - 슬리피지, 가스 가격 제한
4. ✅ **자동 실행** - 기회 발견 시 즉시 실행

---

## 실제 트랜잭션의 장점

1. ✅ **Balancer 플래시론** - 수수료 0%로 비용 절감
2. ✅ **복잡한 경로** - 3-leg+ 아비트라지로 더 많은 기회
3. ✅ **대량 거래** - 9 ETH로 큰 이익 추구

